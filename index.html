<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
      content="width=device-width, height=device-height,
               initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>FASHION WEEK SACRAMENTO | Final Casting Day Two @ The Atrium</title>

<!-- html2canvas -->
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
html,body{
  margin:0;padding:0;
  width:100%;height:100%;
  background:#dcd8cf;
  font-family:"Times New Roman",serif;
}

#app{
  width:100vw;height:100vh;
  display:flex;flex-direction:column;align-items:center;
  background:#fffefa;
  overflow:hidden;position:relative;
}

/* HEADER */
header{
  width:100%;
  text-align:center;
  border-top:4px double #000;
  border-bottom:4px double #000;
  background:#fff;
  padding:1.3vh 0;
}
header h1{
  margin:0;font-size:5vw;font-weight:900;
  white-space:normal;word-break:keep-all;overflow-wrap:break-word;
}
header p{margin:0.3vh 0 0;font-size:3vw;font-style:italic;}

/* MAIN IMAGE (16:9) */
.frame{
  width:95%;aspect-ratio:16/9;
  margin:1vh auto;
  border:0.3vh solid #333;border-radius:0.8vw;
  background:#eee center/cover no-repeat;
  overflow:hidden;position:relative;
  display:flex;align-items:center;justify-content:center;
  color:#666;font-style:italic;
}
.frame canvas{
  width:100%;height:100%;
  touch-action:none;
}
.frame input[type=file]{position:absolute;bottom:2vh;left:2vw;opacity:0;width:40px;height:40px;}
.frame input[type=range]{position:absolute;bottom:2vh;right:2vw;width:30%;}

/* TITLE */
h2{
  width:88%;
  text-align:center;
  font-size:4.3vw;
  line-height:1.25;
  font-weight:bold;
  border-bottom:1px solid #444;
  margin:0 auto;
  padding-bottom:0.4vh;
  word-break:keep-all;
  overflow-wrap:break-word;
}

/* STORY */
.story{
  width:88%;
  font-size:3.2vw;
  line-height:1.55;
  text-align:justify;
  margin-top:0.6vh;
  flex:1;
  overflow:auto;
  word-wrap:break-word;
  hyphens:auto;
  padding-right:1vw;
}

/* 3 PORTRAIT PHOTOS 3x4 */
.photo-row{
  display:flex;justify-content:space-between;
  width:92%;margin:1vh 0;gap:2%;
}
.pframe{
  flex:1;aspect-ratio:3/4;
  border:0.25vh solid #333;border-radius:0.8vw;
  background:#e6e6e6 center/cover no-repeat;color:#555;
  font-size:2.8vw;font-style:italic;position:relative;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
}
.pframe canvas{width:100%;height:100%;touch-action:none;}
.pframe input[type=file]{position:absolute;bottom:1vh;left:1vh;opacity:0;width:30px;height:30px;}
.pframe input[type=range]{position:absolute;bottom:1vh;right:1vh;width:40%;}

/* FOOTER */
footer{
  width:100%;
  text-align:center;
  border-top:3px double #000;
  font-size:2.8vw;
  padding:0.8vh 0 1vh;
  background:#fff;
}
footer a{
  color:#000;text-decoration:none;border-bottom:0.1vh solid #000;
}
footer a:hover{color:#b58900;border-bottom-color:#b58900;}
footer em{display:block;font-size:2.5vw;font-style:italic;margin-top:0.3vh;}

/* SAVE BUTTON */
#saveBtn{
  position:absolute;
  bottom:4vh;right:4vw;
  width:13vw;height:13vw;
  border:none;border-radius:50%;
  background:#000;color:#fff;font-size:6vw;
  box-shadow:0 0 8px rgba(0,0,0,0.3);
}
</style>
</head>

<body>
<div id="app">
  <header>
    <h1>FASHION WEEK SACRAMENTO</h1>
    <p>FINAL CASTING DAY TWO • JAN 23 2026</p>
  </header>

  <!-- main canvas for primary photo -->
  <div class="frame" id="mainFrame">
    <canvas id="mainCanvas"></canvas>
    Tap to Insert Main Photo
    <input type="file" accept="image/*;capture=camera"
      onchange="loadToCanvas(event,'mainCanvas')" />
    <input type="range" min="1" max="2" step="0.01" value="1"
      id="zoomMain" onchange="zoomCanvas('mainCanvas','zoomMain')">
  </div>

  <h2>FINAL CASTING FOR MODELS HELD AT THE ATRIUM</h2>

  <div class="story" id="storyText">
    Day Two of Fashion Week Sacramento’s model castings was the last round for 2026, held at The Atrium — a 501(c)(3) nonprofit creative center for sustainability and innovation. As an incubator for “business for good,” The Atrium brings together artists and entrepreneurs to collaborate toward an omni‑considerate future. Models arrived ready to make their final walk before Fashion Week Sacramento unfolds this March.
  </div>

  <!-- 3 portrait images -->
  <div class="photo-row">
    <div class="pframe" id="p1">
      <canvas id="c1"></canvas>
      <input type="file" accept="image/*;capture=camera" onchange="loadToCanvas(event,'c1')">
      <input type="range" min="1" max="2" step="0.01" value="1" id="z1"
             onchange="zoomCanvas('c1','z1')">
    </div>
    <div class="pframe" id="p2">
      <canvas id="c2"></canvas>
      <input type="file" accept="image/*;capture=camera" onchange="loadToCanvas(event,'c2')">
      <input type="range" min="1" max="2" step="0.01" value="1" id="z2"
             onchange="zoomCanvas('c2','z2')">
    </div>
    <div class="pframe" id="p3">
      <canvas id="c3"></canvas>
      <input type="file" accept="image/*;capture=camera" onchange="loadToCanvas(event,'c3')">
      <input type="range" min="1" max="2" step="0.01" value="1" id="z3"
             onchange="zoomCanvas('c3','z3')">
    </div>
  </div>

  <footer>
    <strong>
      DMR Productions • 
      <a href="https://www.dmrproductions.online" target="_blank">www.dmrproductions.online</a> • 
      <a href="https://www.instagram.com/dmrprod" target="_blank">@dmrprod</a>
    </strong>
    <em>Fashion Week Sacramento 2026 Final Casting Edition</em>
  </footer>

  <!-- Save/Share Button -->
  <button id="saveBtn" title="Save Story as Image">⬇️</button>
</div>

<script>
/* ===== Image Loading and Zoom within Canvas ===== */
function loadToCanvas(e,canvasId){
  const file=e.target.files[0];
  if(!file)return;
  const reader=new FileReader();
  reader.onload=x=>{
    const img=new Image();
    img.onload=function(){
      const cvs=document.getElementById(canvasId);
      const ctx=cvs.getContext('2d');
      cvs.width=cvs.offsetWidth*2; // higher res
      cvs.height=cvs.offsetHeight*2;
      drawCenteredImage(ctx,img,cvs);
      cvs.dataset.src=x.target.result; // store for zoom
      cvs.dataset.scale=1;
    };
    img.src=x.target.result;
  };
  reader.readAsDataURL(file);
}

/* Draw image centered & scaled */
function drawCenteredImage(ctx,img,cvs,scale=1){
  ctx.clearRect(0,0,cvs.width,cvs.height);
  const iw=img.width*scale, ih=img.height*scale;
  const cw=cvs.width, ch=cvs.height;
  const ratio=Math.max(cw/iw,ch/ih);
  const w=iw*ratio, h=ih*ratio;
  ctx.drawImage(img,(cw-w)/2,(ch-h)/2,w,h);
}

/* Zooming using slider */
function zoomCanvas(canvasId,zoomId){
  const cvs=document.getElementById(canvasId);
  const ctx=cvs.getContext('2d');
  const scale=parseFloat(document.getElementById(zoomId).value);
  const src=cvs.dataset.src;
  if(!src)return;
  const img=new Image();
  img.onload=()=>drawCenteredImage(ctx,img,cvs,scale);
  img.src=src;
  cvs.dataset.scale=scale;
}

/* ======= Save / Share as JPG ======= */
document.getElementById("saveBtn").addEventListener("click",()=>{
  const app=document.getElementById("app");
  html2canvas(app,{scale:2,useCORS:true}).then(canvas=>{
    canvas.toBlob(blob=>{
      const file=new File([blob],"FashionWeekSacramento_FinalCasting.jpg",{type:"image/jpeg"});
      if(navigator.share){
        navigator.share({title:"Fashion Week Sacramento Final Casting",
                         text:"Fashion Week Sacramento 2026 Final Casting Day Two @ The Atrium",
                         files:[file]}).catch(()=>downloadBlob(blob));
      }else downloadBlob(blob);
    });
  });
});
function downloadBlob(blob){
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download="FashionWeekSacramento_FinalCasting.jpg";
  link.click();
  URL.revokeObjectURL(link.href);
}
</script>
</body>
</html>
